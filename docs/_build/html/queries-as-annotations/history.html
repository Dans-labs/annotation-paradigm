<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Queries As Annotations &mdash; annotation-paradigm 3.0 documentation</title>
    
    <link rel="stylesheet" href="../_static/default.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '3.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="top" title="annotation-paradigm 3.0 documentation" href="../index.html" />
    <link rel="next" title="Topics As Annotations" href="../topics-as-annotations/history.html" />
    <link rel="prev" title="annotation-paradigm documentation" href="../index.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../topics-as-annotations/history.html" title="Topics As Annotations"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="../index.html" title="annotation-paradigm documentation"
             accesskey="P">previous</a> |</li>
        <li><a href="../index.html">annotation-paradigm 3.0 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="queries-as-annotations">
<span id="id1"></span><h1>Queries As Annotations<a class="headerlink" href="#queries-as-annotations" title="Permalink to this headline">¶</a></h1>
<img alt="../_images/Escribano.jpg" src="../_images/Escribano.jpg" />
<img alt="../_images/QueryAnnot2.png" src="../_images/QueryAnnot2.png" />
<div class="section" id="application">
<h2>Application<a class="headerlink" href="#application" title="Permalink to this headline">¶</a></h2>
<p>The application consists of two parts,
a set of perl scripts for data conversion and
a Web2Py web application for the end user.</p>
<div class="section" id="data-conversion">
<h3>Data conversion<a class="headerlink" href="#data-conversion" title="Permalink to this headline">¶</a></h3>
<p>A number of Perl scripts to extract the data from the Emdros WIVU database by means of MQL queries.
After that the MQL output is transformed into several SQL files, to be bulk imported by an SQL database.</p>
<p>There is a database, <em>wivu</em> for the WIVU textual data, and there is a database, <em>oannot</em>, for
the annotation data, which are <em>feature data</em>, also coming from the WIVU database,
and <em>query data</em>, imported from a set of example queries.</p>
</div>
<div class="section" id="web-application">
<h3>Web Application<a class="headerlink" href="#web-application" title="Permalink to this headline">¶</a></h3>
<p>The Web Application is based on the <a class="reference external" href="http://web2py.com">web2py</a> framework.
The directory <em>qaa_3_0</em> contains the complete web app.
It can be deployed on a web2py installation, but it will only work if it can connect
to the relevant databases.</p>
</div>
</div>
<div class="section" id="history">
<h2>History<a class="headerlink" href="#history" title="Permalink to this headline">¶</a></h2>
<p>Author: <a class="reference external" href="http://www.dans.knaw.nl/en/content/contact/staff-members/dirk-roorda">Dirk Roorda</a>,
<a class="reference external" href="http://www.dans.knaw.nl/en">DANS</a>.</p>
<p>This is the motivation, history and explanation of the
<a class="reference external" href="http://demo.datanetworkservice.nl/qaa">Queries-Features-As-Annotations (demo)-application</a>.</p>
<p>The underlying idea has been presented first at workshop
<a class="reference external" href="http://www.lorentzcenter.nl/lc/web/2012/480/info.php3?wsid=480">Biblical Scholarship and Humanities Computing</a>
workshop on 2012-02-06/10.
See also <a class="reference internal" href="../lorentz-workshop/history.html#lorentz-workshop"><em>Lorentz Workshop</em></a>.
Currently the idea is being worked out in a CLARIN-NL project called SHEBANQ.</p>
<p>Hopefully SHEBANQ will spawn a hub for doing qualitative and quantitative analysis on LAF resources.
See <strong>:ref:`LAF Fabric`</strong>.</p>
<p>I am have also been working on a idea for dealing with versions of all kinds:
<strong>:ref:`Portable Annotations`</strong> or: annotations that
remain usable across variants of resources.</p>
<p>Another example of the versatility of annotations as a carrier for the results of scholarship is
<strong>:ref:`Topics As Annotations`</strong>, for which I am currently developing the
<a class="reference external" href="http://demo.datanetworkservice.nl/taa">Topics-As-Annotations (demo)-application</a>.</p>
<p>Queries and their results are meaningful objects in the scholarly record, but how do we preserve them?
We explore the idea to store queries on a corpus as annotations to that corpus.</p>
<p>Contributors:</p>
<ul class="simple">
<li><a class="reference external" href="http://www.dans.knaw.nl/en/content/contact/staff-members/henk-harmsen">Henk Harmsen</a>
presenter of <em>On the Origin of Scriptures</em>,
highlighting the care that is needed to preserve the texts and the research on them through the digital ages.</li>
<li><a class="reference external" href="http://www.dans.knaw.nl/en/content/contact/staff-members/dirk-roorda">Dirk Roorda</a>
presenter of <em>Datastructures for origins, interpretation and tradition of text,
also known as provenance, analysis and sharing</em> (presentation available at
<a class="reference external" href="http://www.lorentzcenter.nl/lc/web/2012/480/presentations/index.php3?wsid=480&amp;type=presentations">the workshop site</a>.</li>
</ul>
<p>These colleagues of mine have assisted in the development of the demo</p>
<ul class="simple">
<li><a class="reference external" href="http://www.dans.knaw.nl/en/content/contact/staff-members/eko-indarto">Eko Indarto</a></li>
<li><a class="reference external" href="http://www.dans.knaw.nl/en/content/contact/staff-members/vesa-akerman">Vesa Åkerman</a></li>
<li><a class="reference external" href="http://www.dans.knaw.nl/en/content/contact/staff-members/paul-boon">Paul Boon</a></li>
</ul>
<div class="section" id="the-case">
<h3>The Case<a class="headerlink" href="#the-case" title="Permalink to this headline">¶</a></h3>
<div class="section" id="linguistic-text-database">
<h4>Linguistic Text Database<a class="headerlink" href="#linguistic-text-database" title="Permalink to this headline">¶</a></h4>
<img alt="../_images/word_features.png" src="../_images/word_features.png" />
<p>The WIVU group in Amsterdam, led by
<a class="reference external" href="http://www.godgeleerdheid.vu.nl/nl/organisatie/medewerkers/wetenschappelijk-personeel-t-z/talstra.asp">Eep Talstra</a>
has crafted a linguistic database of the Hebrew Old Testament.
It is the fruit of decades of work, still continuing.</p>
<p>The acronym WIVU is not officially known on the website of the Free University Amsterdam.
But there is a current NWO project
<a class="reference external" href="http://www.nwo.nl/projecten.nsf/pages/2300159387">Data and Tradition.
The Hebrew Bible as a linguistic corpus and as a literary composition</a>,
initiated by Eep Talstra,  that continues the WIVU work.
<a class="reference external" href="http://www.godgeleerdheid.vu.nl/nl/organisatie/medewerkers/wetenschappelijk-personeel-g-l/o-glanz/index.asp">Oliver Glanz</a>
is associated with it.</p>
<p>The text with all its features is stored in a special database (<a class="reference external" href="http://emdros.org/">EMDROS</a>).
This database supports a pragmatic subset of the query language QL, defined in [Doedens].
The subset is called
<a class="reference external" href="http://emdros.org/mql.html">MQL</a>.
EMDROS is a front-end on more conventional database technologies such as MySQL or SQLite.</p>
<p>Scholars use MQL queries to shed light on exegetical questions.
It is possible to define quite sophisticated queries into text corpora,
of which the Hebrew Bible is an example.
These queries do not only mine the surface forms of the texts,
but also the annotated features that have been added over time.
Depending on the amount and detail of these features, the queries will yield a treasure of information,
some of which will be fed into the text database in subsequent stages.</p>
<img alt="../_images/emdros-logo.png" src="../_images/emdros-logo.png" />
<img alt="../_images/dabar.png" src="../_images/dabar.png" />
<p>The WIVU database is included and integrated in
<a class="reference external" href="http://www.logos.com/product/8644/stuttgart-electronic-study-bible">Logos/SESB Bible study software</a>.</p>
<p>SESB 3.0 also contains the Biblia Hebraica Stuttgartensia with text critical apparatus and linguistic WIVU database,
plus the Biblia Hebraica Stuttgartensia: Workgroep Informatica Constituency Tree Analysis.
The new WIVU database allow for a precise overview on how the single textual elements
of a specific text passage are analyzed and hierarchically organized.</p>
<p>The WIVU database is not the only linguistically marked up database of the Hebrew Bible.
To get a feel for how these databases are used, have a look at the
<a class="reference external" href="http://community.logos.com/forums/t/29230.aspx">Logos users&#8217; forum</a>.</p>
<p>While this approach is beneficial for analysis and <em>interpretation</em>, it poses challenges for sharing and <em>tradition</em>.</p>
<p>All these people that have bought their individual copies of the WIVU database,
running their queries locally, what means for sharing their research do they have?
Of course they can publish their results in scholarly articles, but how is one to get an overview of all the research that is going on?</p>
<p>Here we propose an approach where queries and their results are being visualised
together with the <em>canonical</em> sources around which they have been constructed.</p>
<p>A first attempt by DANS for sharing the research done with the WIVU database using the EMDROS tool has resulted in a
<a class="reference external" href="http://wivu.dans.knaw.nl">website hosted by DANS</a>
where interested people can experiment with MQL queries on a 2008 version of the WIVU database.</p>
<p>After that the WIVU database has been
<a class="reference external" href="http://www.clarin.eu/node/2439">listed</a>
in an inventory of language resources by the European
<a class="reference external" href="http://www.clarin.eu">CLARIN</a>
project.</p>
<img alt="../_images/topbar_left4.jpg" src="../_images/topbar_left4.jpg" />
</div>
<div class="section" id="open-annotation">
<h4>Open Annotation<a class="headerlink" href="#open-annotation" title="Permalink to this headline">¶</a></h4>
<img alt="../_images/oac-logo-ds.png" src="../_images/oac-logo-ds.png" />
<p>Annotation is a pervasive research activity.
It is the vehicle to enrich the data of science by the insights of experts.
Annotations are often locked into the sytems that hold the data or the tools by which scientists perform their analysis.
They might be using programs on their own personal computers,
or work in an institutional environment around a database for which no public access has been set up.
Where it is not possible to address the things that annotations are about,
the annotations themselves cannot be shared in ways that do justice to their potential.</p>
<p>It is very fitting in our <em>network age</em> that there is an initiative to liberate annotations
from their specialised contexts and share them freely on the web: the
<a class="reference external" href="http://www.openannotation.org/">Open Annotation Collaboration (OAC)</a>.</p>
<p>The <em>first task</em> is to identify a general, abstract model to which all annotations conform.
The
<a class="reference external" href="http://www.openannotation.org/spec/beta/">OAC model</a>
talks about annotations as entities having one <em>body</em> and one or more <em>targets</em>.
The body is what you say about the targets.</p>
<p>The <em>second task</em> is to employ web-technology to underpins that model.
OpenAnnotation has chosen the emerging Linked Data framework
(see also <a class="reference external" href="http://linkeddatabook.com/editions/1.0/">Linked Data Book</a>)
for giving web-reality to its abstract concepts of bodies, targets and what connects them together.</p>
<p>Additional information about an annotation can be supplied as well.
This is <em>metadata</em> about an annotation.
This is the place to tell who made the annotation, when, and why, in what context, referring to which publications, etc.</p>
<p>Metadata is not modeled by the OpenAnnotation Collaboration.
It is attached to the annotation by usual Linked Data means.</p>
<p>Taking all this togehter means that:
here we have a framework that is working on the most pervasive technology of the information age,
with a nearly unlimited capacity of making connections where there used to be no connections.
It is suited to express the results of much hard research work.
Last but not least it has the promise of new discovery by new ways of visualising patterns.</p>
</div>
</div>
<div class="section" id="the-idea">
<h3>The Idea<a class="headerlink" href="#the-idea" title="Permalink to this headline">¶</a></h3>
<div class="section" id="id3">
<h4>Queries as Annotations<a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h4>
<p>So much for annotations.
What about queries into databases?
Where annotations are rather passive, static comments, queries are active, dynamic forays into landscapes of data.
What do the benefits of OpenAnnotation have to do with queries?
If we want to preserve research output, we should preserve queries!</p>
<p>Yes, and here is how.
First we must realise how difficult it is to preserve queries in their dynamic form.
Several problems stand in our way:</p>
<ul class="simple">
<li>real-life databases are changing all the time.
Running a query now will give different results from running a query tomorrow.</li>
<li>software itself is difficult to preserve.
The whole stack of
&lt;operating system - database management system - query language - publishing manager&gt;
is changing at such a rate, that if you do nothing special,
the query that runs fine now, will not run at all in two years time.</li>
</ul>
<p>Yet, when a scholar is grounding the conclusions of a journal article on the results of a query,
it is important that there is some permanent record of the exact results.
It matters less that the query cannot repeated exactly.
It matters more that when the query is repeated, the differences with previous runs can be spotted.</p>
<p>Preserving the record of a query (and its results) is a whole lot different from preserving
the capability of running that query with exactly the same results for the indefinite future.
This record is not dynamic but static, not active but passive.
So it makes sense to turn to
OpenAnnotaion again and see what they can do for query <em>records</em>.</p>
<p>The central idea is:</p>
<p><strong>a query on a text database can be preserved as an annotation to all its result occurrences in that database.</strong></p>
<p>In the list below the exact correspondence between the annotation concept and the query(record) concept is shown, together with the WIVU database as an example.</p>
<img alt="../_images/qaa-table.png" src="../_images/qaa-table.png" />
</div>
<div class="section" id="benefits-of-queries-as-annotations">
<h4>Benefits of Queries-As-Annotations<a class="headerlink" href="#benefits-of-queries-as-annotations" title="Permalink to this headline">¶</a></h4>
<img alt="../_images/queriesasannots.png" src="../_images/queriesasannots.png" />
<p>Is it worthwhile to preserve queries as annotations?
What can you do with it?
Well, the best way to find out is to start building it and see what happens.</p>
<p>We (Eko and Dirk) have built a
<a class="reference external" href="http://demo.datanetworkservice.nl:8080/wivu-demo/wivu">demo web application</a>
that shows the surface text of the WIVU database in the left column,
and the relevant queries in the right column.
A query is relevant if it has results occurring in the text of the left column.
You can click on a query to highlight the actual results on the left.</p>
<p>When DANS built the
<a class="reference external" href="http://wivu.dans.knaw.nl">DANS-WIVU website</a>
back in 2008, we used 22 real-life example queries.
Now in 2012 we use a new version of the database, called BHS3,
and we have adapted those 22 queries to the new datamodel.
Yes, the data model has changed, most of the queries did not run <em>out of the box</em>.</p>
<p>Users of bible study software are familiar with searching (=querying).
But it is just one direction of information that is usually supported: given the query, you get the results.
What is more difficult to obtain, is: given text passages, what are the queries of which they are results?</p>
<p>This latter direction makes only sense if there is a set of queries that have a significant research value.
Not every search command or query is equally valuable.
It depends on the underlying research question, if there is one,
the identity of the person/project that crafted the query, and associated publications.
Queries-As-Annotations have the potential to make this network visible.
And the source texts themselves are part of this network and provide access to it.</p>
<p>The present demo application lets scholars <em>stumble upon</em> each other&#8217;s
research questions by showing the published queries, including metadata, next to their results.</p>
<p>If there is a significant amount of published queries, an interesting network of researchers,
research questions, query instructions and text passages will be revealed.</p>
</div>
<div class="section" id="anchored-sources">
<h4>Anchored Sources<a class="headerlink" href="#anchored-sources" title="Permalink to this headline">¶</a></h4>
<p>The query-as-annotation idea is most easily implemented and most effective
if the sources against which the queries are executed, are stable.</p>
<p>If they are not stable, the idea still works if the atomic elements in the sources are addressable by stable addresses.</p>
<p>If the addresses are not stable, the idea can still be put to work if we can translate addresses from one version to another.</p>
<p>This requirement can be summarised by saying that the sources should be anchored:</p>
<p><strong>all atomic elements of the sources should have well-defined addresses.</strong></p>
<p>In the WIVU case, the words are called monads and they have a sequence number in the whole corpus.
We have used these sequence numbers as our anchors in for our demo application.</p>
<p>There are more versions of the Hebrew texts that collectively comprise the Old Testament.
If we do not want to tie our queries to a specific version, several approaches could be followed.
We could make databases for the individual versions, assign local monad numbers to the words,
and then compute a mapping between the monad numbers in such a way that the numbers of corresponding words are mapped.</p>
<p>A radically other approach is to integrate all versions in a super-version.
Each word will carry an extra feature, called version-membership,
which specifies the versions to which the word belongs.
If the addresses of the words are assigned in such a way that it is possible to add new words between existing words,
than we can keep anchors stable even if new versions are discovered and added.</p>
<p>The query-as-annotation approach is suited also to this super version.
Even if the assignment of words to versions is not stable,
and follows the successive waves of scholarship,
the words themselves have fixed addresses, and can be targeted by query records.</p>
</div>
<div class="section" id="independence-of-analytical-tools">
<h4>Independence of Analytical Tools<a class="headerlink" href="#independence-of-analytical-tools" title="Permalink to this headline">¶</a></h4>
<p>In order to show the query <em>record</em>, it is not necessary to preserve the analytical machinery in working order.</p>
<p>A positive consequence is that there is no brake on the continuous evolution of analysis tools.
There is no legacy to be carried around.
When showing query results, it is not needed to show all the analytical features carried by the words in the database.
That makes it easier to build web interfaces that are optimised for sharing research and discovering larger patterns.</p>
<p>Of course, it remains important to preserve the <em>data</em> of the analytical machinery,
i.e. all the features and their organisation by the database.
But we do not have to preserve them in a way that we can run the analytical tools on them.
It is sufficient that the data is transparent en well-documented.</p>
<p>Transparent means: open to inspection, not hidden behind opaque binary formats.
The tools that see through these binary formats may not exist anymore somewhere in the future.</p>
<p>Well-documented means that it will be clear to future users of the data what the features mean,
what the quality of the value assignments are, and for what purposes the data have been collected and used.</p>
</div>
<div class="section" id="solution-of-digital-preservation">
<h4>Solution of Digital Preservation<a class="headerlink" href="#solution-of-digital-preservation" title="Permalink to this headline">¶</a></h4>
<p>Considering the field of biblical scholarship, the nature of the analysis that takes place,
the kind of research results that are communicated,
it can be concluded that we can do a good job in digital preservation of research data if:</p>
<ul class="simple">
<li>we use and preserve anchored sources</li>
<li>we preserve static analytical data in trusted digital repositories</li>
<li>build and maintain an Linked Data web of Queries-As -Annotations</li>
</ul>
<p>It is not perfect, in that we will not be able to completely reproduce every detail of past research.
But it is still good value to be able to see a well-documented, well connected track record of research questions and answers.</p>
</div>
</div>
<div class="section" id="the-work">
<h3>The Work<a class="headerlink" href="#the-work" title="Permalink to this headline">¶</a></h3>
<div class="section" id="components">
<h4>Components<a class="headerlink" href="#components" title="Permalink to this headline">¶</a></h4>
<img alt="../_images/oannot1.png" src="../_images/oannot1.png" />
<div class="section" id="annotation-database">
<h5>Annotation Database<a class="headerlink" href="#annotation-database" title="Permalink to this headline">¶</a></h5>
<p>For maximum interoperability, the Open Annotations should be stored in an RDF triple store and published on the Web.</p>
<p>Then other researchers can discover the queries, view their metadata properties,
follow their results.
Via the property <em>researcher</em> they can find the one who has crafted the query,
and then find other queries by the same person.
Through the property <em>research-question</em> they can observe the research programme behind the query,
and find useful keywords to search for related material.</p>
<p>Nevertheless, this demo stores the queries in a local database.
This might be a typical situation.
In order to use the annotations in a rendering application,
it might be useful to import them from a triple store into a local database.</p>
<p>Conversely, when queries are locally added, they must be exported from the local database to a global triple store.</p>
<p>Although we store the queries in a local database, they are modeled as annotations with bodies,
targets and separate metadata.
It is conceivable that quite different annotations (not derived from queries) on the same source (Hebrew Bible) are added to the store.
This will in no way break the application.</p>
</div>
<div class="section" id="source-database">
<h5>Source Database<a class="headerlink" href="#source-database" title="Permalink to this headline">¶</a></h5>
<p>We work with a version of the Hebrew Bible that comes from the WIVU group.
The version is called BHS3.</p>
<p>This is a feature-rich source, in the literal sense:
words and clusters of words are objects, and objects have many features.</p>
<p>We compiled a source text in XML by extracting the <em>text</em> feature from the words,
the verse-, chapter- and book- objects, and the monad numbers
(i.e. the sequence numbers of the individual words in the complete text).</p>
<p>These monad numbers are our anchors.
They will be used to identify the occurrences of the query results.</p>
<p>Here it is clearly visible that we do almost nothing with the analytical machinery.
It&#8217;s only the surface text and the anchors that we need.</p>
<p>That being said, it is not that difficult to also export some of the features and show them in the interface,
possibly on demand.
If we take that too far,
the web interface will be a competitor of the commercial bible study software in which the WIVU is packaged.</p>
<p>Whether that is a good thing or a bad thing depends on your perspective.
From the perspective of
<a class="reference external" href="http://www.dans.knaw.nl/en">DANS</a>
, as an enabler of data re-usage, it is definitely a good thing!</p>
</div>
<div class="section" id="rendering-application">
<h5>Rendering Application<a class="headerlink" href="#rendering-application" title="Permalink to this headline">¶</a></h5>
<img alt="../_images/QueryAnnot3.png" src="../_images/QueryAnnot3.png" />
<p>The
<a class="reference external" href="http://demo.datanetworkservice.nl/qaa">web-application</a>
that renders the sources shows individual chapters of individual books of the Hebrew Bible.</p>
<p>The browser-screen is divided into a left, middle and a right column.</p>
<p>The middle column contains selection controls for books and chapters,
and below that displays the selected chapter.
The text is rendered in Hebrew characters, from right to left.
This is the primary data, the source, and it is pulled out of a mysql database, called <em>wivu</em>.</p>
<p>The left and right columns contain annotations, which are pulled out of a different database,
called <em>oannot</em>.
This database has tables for bodies, targets and metadatarecords for annotations.
It has a table for annotations as well.
An annotation record consists of an identifier only;
the body and its targets are connected to it by means of link tables.</p>
<p>The left column contains highlight controls for features.
Features are annotations that have bodies of the form <em>key</em> = <em>value</em>,
and they can be distinguished by other annotations through a field called <em>type</em> in the metadata record.
The targets of a feature annotation are all the words that carry that feature-value.</p>
<p>The right column contains the queries that have results in the selected chapter.
The results can be highlighted per query, and more information about the query can be shown on demand.</p>
</div>
<div class="section" id="implementation-notes">
<h5>Implementation notes<a class="headerlink" href="#implementation-notes" title="Permalink to this headline">¶</a></h5>
<p>The current version is built as a web application inside a
<a class="reference external" href="http://web2py.com/">web2py framework</a>.</p>
<p>In a previous version the rendering of the source texts in the middle column has been done with the Java-Hibernate framework:
the database objects are made accessible to Java and from there to the webserver.
However, in a second version we changed to something much more light-weight.
The program does not make very extensive use of the data, so it is not really worthwhile to introduce a data abstraction layer.
More over, this layer makes the performance of the application as a whole less perspicuous:
there is a heavy overhead at first, and a smoother behaviour later on.
We needed more control both with respect to functionality and to performance.</p>
<p>The rendering of the queries in the right hand column is done in a different way.
We needed more intricate queries to select the relevant items.
There is also another reason not to knit left and right too closely together.
The annotations are to come from a different world, on demand, as a kind of <em>stand-off mark-up</em>.
They are an overlay over the sources themselves.
The evolution of rendering the sources should not be tethered to the evolution of rendering the annotations.</p>
<p>A short remark about the highlighting functionality.
This is realised by client side javascript.
The query that fetches the query-cum-results gathers enough information to know which words should be highlighted per query.
This information is written out to javascript associative arrays inside a &lt;script&gt; tag in the body of the html that is sent to the browser.
For the features in the left column it works in the same way, essentially.</p>
<p>The success of the web2py framework appears from the following observation:
the amount of our own coding on top of the framework is embarrassingly small.
Here is an overview of the number of lines we coded in each formalism.</p>
<table border="1" class="docutils">
<colgroup>
<col width="33%" />
<col width="19%" />
<col width="47%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">language</th>
<th class="head">web app</th>
<th class="head">data preparations</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>sql</td>
<td>90</td>
<td>80</td>
</tr>
<tr class="row-odd"><td>python</td>
<td>250</td>
<td>x</td>
</tr>
<tr class="row-even"><td>perl</td>
<td>x</td>
<td>650</td>
</tr>
<tr class="row-odd"><td>javascript</td>
<td>300</td>
<td>x</td>
</tr>
<tr class="row-even"><td>html</td>
<td>50</td>
<td>x</td>
</tr>
<tr class="row-odd"><td>css</td>
<td>60</td>
<td>x</td>
</tr>
<tr class="row-even"><td>shell-script</td>
<td>x</td>
<td>280</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="data-statistics">
<h4>Data Statistics<a class="headerlink" href="#data-statistics" title="Permalink to this headline">¶</a></h4>
<p>Here is an overview of how many source data and annotations this application deals with.</p>
<table border="1" class="docutils">
<colgroup>
<col width="53%" />
<col width="18%" />
<col width="29%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">quantity</th>
<th class="head">amount</th>
<th class="head">extra info</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>source texts</td>
<td>90</td>
<td>80</td>
</tr>
<tr class="row-odd"><td>all annotations</td>
<td>250</td>
<td>x</td>
</tr>
<tr class="row-even"><td>all targets</td>
<td>x</td>
<td>650</td>
</tr>
<tr class="row-odd"><td>query annotations</td>
<td>300</td>
<td>x</td>
</tr>
<tr class="row-even"><td>query targets</td>
<td>50</td>
<td>x</td>
</tr>
<tr class="row-odd"><td>feature annotations</td>
<td>60</td>
<td>x</td>
</tr>
<tr class="row-even"><td>feature targets</td>
<td>x</td>
<td>280</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="functionality">
<h4>Functionality<a class="headerlink" href="#functionality" title="Permalink to this headline">¶</a></h4>
<div class="section" id="basic-features-implemented">
<h5>Basic Features (implemented)<a class="headerlink" href="#basic-features-implemented" title="Permalink to this headline">¶</a></h5>
<p>The source text is rendered (per individual chapter) with results of selected queries highlighted.</p>
<p>This shows the beginning of the experience that you can navigate over a web of research questions,
researchers, query instructions, query results and source texts.</p>
<p>The most critical part is to encounter results in source texts and navigate to the relevant queries.</p>
</div>
<div class="section" id="extensions-not-implemented">
<h5>Extensions (not implemented)<a class="headerlink" href="#extensions-not-implemented" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li>More features of the source text
* selective highlighting of part-of-speech features of words
* mark clauses and phrases by brackets</li>
<li>More navigational aids
* different colors for different queries
* better representation of the structure of a query result</li>
<li>Better display of metadata
* show full details of a query on demand (e.g. on hover)</li>
<li>Query management
* Make a straightforward list interface on the metadata records of the queries
* Make all columns sortable
* Allow editing of fields
* Allow adding new queries</li>
</ul>
</div>
<div class="section" id="adding-queries-not-implemented">
<h5>Adding queries (not implemented)<a class="headerlink" href="#adding-queries-not-implemented" title="Permalink to this headline">¶</a></h5>
<p>There are two ways of adding queries: <em>as a generic annotation</em> or <em>as a verified query</em>.</p>
<p><strong>Generic Annotation</strong></p>
<p>Adding as a generic annotation means that the user supplies an annotation body instruction
and specifies the targets in the source text and provides metadata, and there will be no checking whatsoever.
The body does not need to be a query instruction, and the targets do not have to be the result of any query.
It is just a free annotation, that can say anything about anything.</p>
<p>Of course, it is perfectly possible that a user runs a query on his system at home,
collects the results, and puts everything into an annotation.
As long as the anchors for the words (the <em>monad numbers</em>) in his own version of the sources
correspond exactly with the anchors in the server version of the sources, all is well.</p>
<p><strong>Verified Query</strong></p>
<p>Adding as a verified query means that the annotation to be added really is interpreted as a query.
The user may or may not send his own results along.
In any case, the query will be run against the database of the server,
and those results will be stored when the query is saved as an annotation.
If the results do not agree with the results specified on beforehand by the user, he will get a warning.</p>
</div>
<div class="section" id="linked-data-interoperability">
<h5>Linked Data Interoperability<a class="headerlink" href="#linked-data-interoperability" title="Permalink to this headline">¶</a></h5>
<p>Having the annotations in a local database falls short of the goal of sharing the query results freely on the web.
So that will be the next thing to do:
set up a triple store and export/import mechanisms between the triple store and the local database.
The triple store can the be queried by quite other means: SPARQL queries.
The annotations become discoverable, and it will be possible to collect annotations from various sources.</p>
</div>
</div>
</div>
<div class="section" id="timeline">
<h3>Timeline<a class="headerlink" href="#timeline" title="Permalink to this headline">¶</a></h3>
<p>Below are the most significant events in the history and future (?) of this demo, listed in reversed temporal order.</p>
<div class="section" id="workshop-electronic-tools-in-biblical-hebrew-research-and-teaching">
<h4>2013-05-02 Workshop Electronic Tools in Biblical Hebrew Research and Teaching<a class="headerlink" href="#workshop-electronic-tools-in-biblical-hebrew-research-and-teaching" title="Permalink to this headline">¶</a></h4>
<p>A
<a class="reference external" href="http://www.godgeleerdheid.vu.nl/nl/nieuws-en-agenda/agenda/2013/apr-jun/workshop-electronic-tools-in-biblical-hebrew-teaching-and-research.asp">workshop</a>
where the methods of Biblical research are demonstrated,
a preview on new ways of sharing the results of those results is given.
Eep Talstra, the retiring professor gives a concrete illustration of sorting,
searching and simulation on the basis of the Hebrew Text database he and his group have developed.
After the workshop his successor,
Wido van Peursen takes over with his inaugural lecture &#8220;Grip op Grillige Gegevens&#8221; (getting to grip with capricious/raw data).</p>
</div>
<div class="section" id="shebanq-project-starts">
<h4>2013-05-01 SHEBANQ project starts<a class="headerlink" href="#shebanq-project-starts" title="Permalink to this headline">¶</a></h4>
<p>Today we had a kick-off of the CLARIN-NL project that aims to implement
the idea of queries-as-annotations into a production system,
running at DANS which acts as a CLARIN centre here.</p>
</div>
<div class="section" id="shebanq-project-granted-by-clarin-nl">
<h4>2012-12-18 SHEBANQ project granted by CLARIN-NL<a class="headerlink" href="#shebanq-project-granted-by-clarin-nl" title="Permalink to this headline">¶</a></h4>
<p><em>System for HEBrew text: ANnotations for Queries and markup</em>
is a 100 k€ project proposal for call 4 of the Dutch section of the European project
<a class="reference external" href="http://www.clarin.eu">CLARIN</a>.
With this project the Old Testament group at the VU University Amsterdam,
lead by Wido van Peursen, and DANS will represent the renowned WIVU database in the Linguistic Annotation Format.
It will then be possible to save meaningful queries on that database as (open) annotations.
We will build a query saver as a web application.
A project like this is important to get digital biblical scholarship out of the local computer systems into the clouds.</p>
</div>
<div class="section" id="paper-presented-at-the-asist-conference">
<h4>2012-10-29 Paper presented at the ASIST conference<a class="headerlink" href="#paper-presented-at-the-asist-conference" title="Permalink to this headline">¶</a></h4>
<p>Here are the
<a class="reference external" href="http://www.slideshare.net/dirkroorda/asist2012-annotreduced">slides</a>.
And here is the
<a class="reference external" href="https://www.asis.org/asist2012/proceedings/submissions/84.pdf">article</a>
in the
<a class="reference external" href="https://www.asis.org/asist2012/proceedings/openpage.html">proceedings</a>
(warning: this is a slow link, the result is a 6MB image).
Much more convenient is our final submission, which is a
<a class="reference external" href="http://demo.datanetworkservice.nl/mediawiki/images/8/84/ASIST2012-Annot-DR-ChvdH-final-submission.pdf">searchable pdf</a>.</p>
</div>
<div class="section" id="paper-accepted-for-the-asist-conference">
<h4>2012-07-25 Paper accepted for the ASIST conference<a class="headerlink" href="#paper-accepted-for-the-asist-conference" title="Permalink to this headline">¶</a></h4>
<p>With Charles van den Heuvel I submitted a paper &#8221;
<a class="reference external" href="https://www.asis.org/asist2012/abstracts/84.html">Annotation as a New Paradigm in Research Archiving</a>
&#8221; where we advertise new practices for archives in order to really support modern research.
The showcases are the
<a class="reference external" href="http://ckcc.huygens.knaw.nl/">CKCC project</a>
and the Hebrew database.
The paper has been accepted and will be presented on 29 October 2012 in Baltimore.</p>
</div>
<div class="section" id="towards-portable-annotations">
<h4>2012-03-26 Towards portable annotations<a class="headerlink" href="#towards-portable-annotations" title="Permalink to this headline">¶</a></h4>
<p>Version 3.0: Preparation for <em>portable</em> annotations.
The targets in the texts can be addressed by the word sequence number in the WIVU text.
Now the address consists of book-chapter-verse + local word sequence number, i.e. the sequence number in the verse.
We prepared the Westminster version of the Hebrew Bible with the aim of displaying it together with the WIVU version,
in such a way that words common to both versions have common addresses.</p>
</div>
<div class="section" id="id7">
<h4>2012-03-19/20 <a class="reference external" href="http://www.interedition.eu/?p=186">Interedition Symposium at Huygens ING</a><a class="headerlink" href="#id7" title="Permalink to this headline">¶</a></h4>
<p><a class="reference external" href="http://www.interedition.eu/?page_id=212">Direct link to the program</a></p>
<p>(abstract accepted) (to present and enhanced demo compared to the one presented at <a class="reference internal" href="../lorentz-workshop/history.html#lorentz-workshop"><em>Lorentz Workshop</em></a>)</p>
</div>
<div class="section" id="features-as-annotations">
<h4>2012-03-14 Features as Annotations<a class="headerlink" href="#features-as-annotations" title="Permalink to this headline">¶</a></h4>
<p>Version 2.1: After a recent, internal bootcamp we have brought new features to the demo: <em>features as annotations</em>.
The user can select a number features-value pairs and highlight them in a color of his choice.</p>
</div>
<div class="section" id="ported-to-web2py">
<h4>2012-03-07 Ported to web2py<a class="headerlink" href="#ported-to-web2py" title="Permalink to this headline">¶</a></h4>
<p>The
<a class="reference external" href="http://demo.datanetworkservice.nl/qaa">demo</a>
has been ported to the convenient, python-based web2py framework.
Ready to receive more functionality.</p>
</div>
<div class="section" id="id8">
<h4>2012-02-06/10 <a class="reference external" href="http://www.lorentzcenter.nl/lc/web/2012/480/info.php3?wsid=480">Lorentz workshop</a><a class="headerlink" href="#id8" title="Permalink to this headline">¶</a></h4>
<p>(encouragement to work further on ways of sharing research,
see <a class="reference internal" href="../lorentz-workshop/history.html#lorentz-workshop"><em>Lorentz Workshop</em></a>, queries-as-annotations still stand,
but the idea must be worked out more compellingly).</p>
</div>
<div class="section" id="dans-mini-bootcamp-eko-and-dirk">
<h4>2012-01-30/02-03 DANS mini bootcamp: Eko and Dirk<a class="headerlink" href="#dans-mini-bootcamp-eko-and-dirk" title="Permalink to this headline">¶</a></h4>
<p>Building a demo for the sole purpose of realising the query-as-annotation idea in a real research context.
It is not optimised for performance, it has no security measures whatsoever, and the user interface is bleak.
We await feedback and suggestions from the participants of the Lorentz workshop.
Depending on that, we hope to improve and add and present an improved version on a following workshop.
The demo and its documentation are hosted on a
<a class="reference external" href="http://demo.datanetworkservice.nl/qaa">cloud server</a>
, hired by DANS.</p>
</div>
<div class="section" id="id9">
<h4>2012-01-11/14 <a class="reference external" href="http://interedition.eu/wiki/index.php/Leuven2012">Interedition Bootcamp</a><a class="headerlink" href="#id9" title="Permalink to this headline">¶</a></h4>
<p>Inspiration as to the content and the implementation of the query-as-annotation idea.
Dirk participated in a
<a class="reference external" href="http://interedition.eu/wiki/index.php/Leuven2012:WG_Linked_Data">Linked Data subgroup</a>.
We built services to automatically annotate place names in Arabic, Greek and English texts.
This we did by looking up each and every word in the Geonames database.
The hits were translated into Open Annotations.</p>
</div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Queries As Annotations</a><ul>
<li><a class="reference internal" href="#application">Application</a><ul>
<li><a class="reference internal" href="#data-conversion">Data conversion</a></li>
<li><a class="reference internal" href="#web-application">Web Application</a></li>
</ul>
</li>
<li><a class="reference internal" href="#history">History</a><ul>
<li><a class="reference internal" href="#the-case">The Case</a><ul>
<li><a class="reference internal" href="#linguistic-text-database">Linguistic Text Database</a></li>
<li><a class="reference internal" href="#open-annotation">Open Annotation</a></li>
</ul>
</li>
<li><a class="reference internal" href="#the-idea">The Idea</a><ul>
<li><a class="reference internal" href="#id3">Queries as Annotations</a></li>
<li><a class="reference internal" href="#benefits-of-queries-as-annotations">Benefits of Queries-As-Annotations</a></li>
<li><a class="reference internal" href="#anchored-sources">Anchored Sources</a></li>
<li><a class="reference internal" href="#independence-of-analytical-tools">Independence of Analytical Tools</a></li>
<li><a class="reference internal" href="#solution-of-digital-preservation">Solution of Digital Preservation</a></li>
</ul>
</li>
<li><a class="reference internal" href="#the-work">The Work</a><ul>
<li><a class="reference internal" href="#components">Components</a><ul>
<li><a class="reference internal" href="#annotation-database">Annotation Database</a></li>
<li><a class="reference internal" href="#source-database">Source Database</a></li>
<li><a class="reference internal" href="#rendering-application">Rendering Application</a></li>
<li><a class="reference internal" href="#implementation-notes">Implementation notes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#data-statistics">Data Statistics</a></li>
<li><a class="reference internal" href="#functionality">Functionality</a><ul>
<li><a class="reference internal" href="#basic-features-implemented">Basic Features (implemented)</a></li>
<li><a class="reference internal" href="#extensions-not-implemented">Extensions (not implemented)</a></li>
<li><a class="reference internal" href="#adding-queries-not-implemented">Adding queries (not implemented)</a></li>
<li><a class="reference internal" href="#linked-data-interoperability">Linked Data Interoperability</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#timeline">Timeline</a><ul>
<li><a class="reference internal" href="#workshop-electronic-tools-in-biblical-hebrew-research-and-teaching">2013-05-02 Workshop Electronic Tools in Biblical Hebrew Research and Teaching</a></li>
<li><a class="reference internal" href="#shebanq-project-starts">2013-05-01 SHEBANQ project starts</a></li>
<li><a class="reference internal" href="#shebanq-project-granted-by-clarin-nl">2012-12-18 SHEBANQ project granted by CLARIN-NL</a></li>
<li><a class="reference internal" href="#paper-presented-at-the-asist-conference">2012-10-29 Paper presented at the ASIST conference</a></li>
<li><a class="reference internal" href="#paper-accepted-for-the-asist-conference">2012-07-25 Paper accepted for the ASIST conference</a></li>
<li><a class="reference internal" href="#towards-portable-annotations">2012-03-26 Towards portable annotations</a></li>
<li><a class="reference internal" href="#id7">2012-03-19/20 Interedition Symposium at Huygens ING</a></li>
<li><a class="reference internal" href="#features-as-annotations">2012-03-14 Features as Annotations</a></li>
<li><a class="reference internal" href="#ported-to-web2py">2012-03-07 Ported to web2py</a></li>
<li><a class="reference internal" href="#id8">2012-02-06/10 Lorentz workshop</a></li>
<li><a class="reference internal" href="#dans-mini-bootcamp-eko-and-dirk">2012-01-30/02-03 DANS mini bootcamp: Eko and Dirk</a></li>
<li><a class="reference internal" href="#id9">2012-01-11/14 Interedition Bootcamp</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="../index.html"
                        title="previous chapter">annotation-paradigm documentation</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="../topics-as-annotations/history.html"
                        title="next chapter">Topics As Annotations</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="../_sources/queries-as-annotations/history.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../topics-as-annotations/history.html" title="Topics As Annotations"
             >next</a> |</li>
        <li class="right" >
          <a href="../index.html" title="annotation-paradigm documentation"
             >previous</a> |</li>
        <li><a href="../index.html">annotation-paradigm 3.0 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2013, Dirk Roorda.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2b3.
    </div>
  </body>
</html>